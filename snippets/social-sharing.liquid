{{ 'social-sharing.css' | asset_url | stylesheet_tag: preload: true }}
<div class="dbtfy-social-sharing  {% if display_style %}display_{{ display_style }}{% endif %}">
  {%- if facebook or twitter or pinterest or messenger or copy_link or linkedin or whatsapp or email or reddit -%}
    {%- liquid
      unless sharer_data
        if product != blank
          assign share_permalink = request.host | append: product.url | prepend: 'https:/'
          assign share_image = product.featured_media
          assign share_title = product.title
          assign share_description = product.description | truncatewords: 20
          assign share_content = share_title | append: ' â€” ' | append: share_description
          assign share_title_escaped = product.title | url_param_escape
          assign share_description_escaped = product.description | url_param_escape
          assign share_content_escaped = share_content | url_param_escape

        else
          assign share_image = page_image
          if request.page_type == 'product'
            assign share_image = product.featured_media
          elsif request.page_type == 'article' and article.image != blank
            assign share_image = article.image
          elsif request.page_type == 'collection' and collection.image != blank
            assign share_image = collection.image
          endif
          assign share_title = page_title
          assign share_permalink = request.host | append: request.path | prepend: 'https://'
          if page_description != blank
            assign share_description = page_description | truncatewords: 20
          else
            assign share_description = shop.name | capitalize
          endif

          assign share_title_escaped = product.title | url_param_escape
          assign share_description_escaped = product.description | url_param_escape
          assign share_content_escaped = share_content | url_param_escape
        endif
      endunless
    -%}

    {% capture button %}
      {% if button_image != blank %}
        <img
          src="{{ button_image | image_url: width: 24, height: 24, crop: 'center'}}"
          alt="{{button_image.alt | escape }}"
        >
      {% elsif button_icon != blank %}
        {% render 'material-icon', icon: button_icon %}
      {% endif %}
      {% if title != blank %}
        <div class="social-sharing-title">{{ title }}</div>
      {% endif %}
    {% endcapture %}

    {% if display_style == 'button' %}
      <button class="social-sharing-button-icon {{ button_style }}" aria-describedby="tooltip">
        {{ button }}
      </button>
    {% else %}
      {{ button }}
    {% endif %}
    <ul class="inline-list social-sharing-icons" role="tooltip">
      {%- if copy_link -%}
        <li>
          <a
            target="_blank"
            href="{{ share_permalink }}"
            class="{{ share_button }} copy_link"
            aria-label="{{ 'general.social.alt_text.copy' | t }}"
            title="{{ 'general.social.alt_text.copy' | t }}"
          >
            {%- render 'icon', icon: 'copy_link' -%}
            {% if social_title -%}
              {{ 'general.social.links.copy_link' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}
      {%- if facebook -%}
        <li>
          <a
            target="_blank"
            href="//www.facebook.com/sharer/sharer.php?u={{ share_permalink }}"
            class="{{ share_button }} btn--facebook"
            aria-label="{{ 'general.social.alt_text.share_on_facebook' | t }}"
            title="{{ 'general.social.alt_text.share_on_facebook' | t }}"
          >
            {%- render 'icon', icon: 'facebook' -%}
            {% if social_title %}
              {{ 'general.social.alt_text.share_on_facebook' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}

      {%- if messenger -%}
        <li class="d-md-none">
          <a
            target="_blank"
            href="fb-messenger://share/?link={{ share_permalink }}&app_id={{ settings.facebook_page_id }}"
            class="{{ share_button }} btn--messenger"
            aria-label="{{ 'general.social.alt_text.share_on_messenger' | t }}"
            title="{{ 'general.social.alt_text.share_on_messenger' | t }}"
            data-facebook-id="{{ settings.facebook_page_id }}"
          >
            {%- render 'icon', icon: 'messenger' -%}
            {% if social_title %}
              {{ 'general.social.alt_text.share_on_messenger' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}

      {%- if twitter -%}
        <li>
          <a
            target="_blank"
            href="//twitter.com/intent/tweet?source={{ share_permalink }}&text={{ share_permalink }}%20{{ share_content_escaped }}"
            class="{{ share_button }} btn--twitter"
            aria-label="{{ 'general.social.alt_text.share_on_twitter' | t }}"
            title="{{ 'general.social.alt_text.share_on_twitter' | t }}"
            data-share-content="{{ share_content_escaped }}"
          >
            {%- render 'icon', icon: 'twitter' -%}
            {% if social_title %}
              {{ 'general.social.alt_text.share_on_twitter' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}

      {%- if pinterest -%}
        <li>
          <a
            target="_blank"
            href="//pinterest.com/pin/create/button/?url={{ share_permalink }}&media={{ share_image | image_url: width: 1200 }}&description={{ share_content_escaped }}"
            class="{{ share_button }} btn--pinterest"
            aria-label="{{ 'general.social.alt_text.share_on_pinterest' | t }}"
            title="{{ 'general.social.alt_text.share_on_pinterest' | t }}"
            data-share-content="{{ share_content_escaped }}"
            data-share-media="{{ share_image | image_url: width: 1200 }}"
          >
            {%- render 'icon', icon: 'pinterest' -%}
            {% if social_title %}
              {{ 'general.social.alt_text.share_on_pinterest' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}

      {%- if whatsapp -%}
        <li>
          <a
            target="_blank"
            href="//api.whatsapp.com/send?text={{ share_permalink }}"
            class="{{ share_button }} btn--whatsapp"
            aria-label="{{ 'general.social.alt_text.share_on_whatsapp' | t }}"
            title="{{ 'general.social.alt_text.share_on_whatsapp' | t }}"
          >
            {%- render 'icon', icon: 'whatsapp' -%}
            {% if social_title %}
              {{ 'general.social.alt_text.share_on_whatsapp' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}

      {%- if linkedin -%}
        <li>
          <a
            target="_blank"
            href="//www.linkedin.com/shareArticle?mini=true&url={{ share_permalink }}&title={{ share_title_escaped }}&summary={{ share_description_escaped }}&source={{ share_permalink }}"
            class="{{ share_button }} btn--linkedin"
            aria-label="{{ 'general.social.alt_text.share_on_linkedin' | t }}"
            title="{{ 'general.social.alt_text.share_on_linkedin' | t }}"
            data-share-title="{{ share_title_escaped }}"
            data-share-description="{{ share_description_escaped }}"
          >
            {%- render 'icon', icon: 'linkedin' -%}
            {% if social_title %}
              {{ 'general.social.alt_text.share_on_linkedin' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}

      {%- if reddit -%}
        <li>
          <a
            target="_blank"
            href="//www.reddit.com/submit?url={{ share_permalink }}&title={{ share_content_escaped }}"
            class="{{ share_button }} btn--reddit"
            aria-label="{{ 'general.social.alt_text.share_on_reddit' | t }}"
            title="{{ 'general.social.alt_text.share_on_reddit' | t }}"
            data-share-content="{{ share_content_escaped }}"
          >
            {%- render 'icon', icon: 'reddit' -%}
            {% if social_title %}
              {{ 'general.social.alt_text.share_on_reddit' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}

      {%- if email -%}
        <li>
          <a
            target="_blank"
            href="mailto:?subject={{ share_title_escaped }}&body={{ share_permalink }}%0D%0D{{ share_content_escaped }}%0D"
            class="{{ share_button }} btn--reveal-primary"
            aria-label="{{ 'general.social.alt_text.share_on_email' | t }}"
            title="{{ 'general.social.alt_text.share_on_email' | t }}"
            data-share-content="{{ share_content_escaped }}"
            data-share-title="{{ share_title_escaped }}"
          >
            {%- render 'icon', icon: 'gmail' -%}
            {% if social_title %}
              {{ 'general.social.alt_text.share_on_email' | t }}
            {% endif %}
          </a>
        </li>
      {%- endif -%}
    </ul>
  {%- endif -%}
</div>
