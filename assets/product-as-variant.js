customElements.get("product-as-variant")||customElements.define("product-as-variant",class extends HTMLElement{constructor(){super(),this.currentProduct=this.dataset.currentProduct,this.swatches=Debutify.widgets.product_as_variants,this.swatchesConfig=Debutify.widgets.product_as_variant_configurations,this.currentProduct&&this.swatches?this.init():this.remove()}init(){const t=this.findMatchingSwatch();if(-1!==t){this.prepareValueToProductMap(t);const e=this.getUniqueOptions(t);let s="";const a=this.matchingBlock.values.split(":").map((t=>t.toLowerCase().trim()));for(const[t,n]of Object.entries(e)){t.toLowerCase();let e="",i="";n.forEach((s=>{const n=`${t}-${s}`.replace(/\s+/g,"-").toLowerCase();let o="";const c=s.toLowerCase().trim(),l=this.swatchesConfig[c];l&&(o=l.includes(".")?`url(${l})`:l),e=a.includes(s.toLowerCase().trim())?s:e,i+=this.valuesTemplate().replace(/{id}/g,n).replace(/{option_name}/g,t).replace(/{value}/g,s).replace(/{background}/g,o).replace(/{checked}/g,a.includes(s.toLowerCase().trim())?"checked":"").replace(/{pill_class}/g,o?"":" swatch--pill")})),s+=this.optionTemplate().replace(/{option_name}/g,t).replace(/{selected_option}/g,e||"").replace(/{values}/g,i)}this.innerHTML=s;this.querySelectorAll(".swatch-input__input").forEach((t=>{t.addEventListener("change",this.onRadioChange.bind(this))}))}}onRadioChange(){const t=[];this.querySelectorAll(".swatch-input__input").forEach((e=>{e.checked&&t.push(e.value)}));const e=t.join(":"),s=this.swatchesByValues[e];s&&(window.location.href=`/products/${s}`)}findMatchingSwatch(){for(let t=0;t<this.swatches.length;t++){const e=this.swatches[t].block_settings;if(this.matchingBlock=e?.find((t=>t.product===this.currentProduct)),this.matchingBlock)return t}return-1}getUniqueOptions(t){const e=this.swatches[t];if(!e||!e.option_names||!this.matchingBlock)return{};const s=e.option_names.split(":"),a={};s.forEach((t=>{a[t]=[]}));const n=this.matchingBlock.values.split(":").map((t=>t));return Object.keys(this.swatchesByValues).forEach((t=>{const e=t.split(":").map((t=>t));e.forEach(((t,i)=>{const o=s[i];if(o){e.every(((t,e)=>e===i||n[e].toLowerCase().trim()===t.toLowerCase().trim()))&&!a[o].includes(t)&&a[o].push(t)}}))})),a}prepareValueToProductMap(t){const e=this.swatches[t];if(!e||!e.block_settings)return{};const s={};e.block_settings.forEach((t=>{s[t.values.toLowerCase()]=t.product})),this.swatchesByValues=s}optionTemplate(){return'<fieldset class="js product-form__input product-form__input--swatch"  data-option-name="{option_name}">\n    <legend class="form__label">\n      {option_name}:\n      <span data-selected-value="">{selected_option}</span>\n    </legend>\n    {values} \n  </fieldset>\n  '}valuesTemplate(){return'<input type="radio" id="{id}" name="{option_name}-1" value="{value}" \n      class="swatch-input__input" data-product-url="" data-option-value-id="4358061326638" data-option-value="{value}"\n      {checked}\n    />\n    <label for="{id}" title="{value}" class="swatch-input__label{pill_class}">\n      <span class="swatch" style="--swatch--background: {background};"></span>\n      <span class="value-title">{value}</span>\n      <span class="visually-hidden label-unavailable">Variant sold out or unavailable</span\n      >\n    </label>'}});