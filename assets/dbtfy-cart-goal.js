customElements.get("dbtfy-cart-goal")||customElements.define("dbtfy-cart-goal",class extends HTMLElement{constructor(){super(),this.goals=Debutify.widgets.cart_goals.global,Debutify.widgets.cart_goals[Shopify.country]&&(this.goals=Debutify.widgets.cart_goals[Shopify.country]),this.all_goals_reached=!1,this.current_goal=null,this.goalMessage=this.querySelector(".dbtfy-cart-goal--message"),setTimeout((()=>{this.cartTotal=Debutify.cart.total_price/100,this.init()}),1e3)}init(){if(!this.goals.length)return;const t=this.displayGoalMessage(this.cartTotal);let e=100*this.cartTotal/this.current_goal.goal_amount,a=this.current_goal.goal_reached_before_color;e>100&&(e=100,a=this.current_goal.goal_reached_after_color),this.style.setProperty("--dbtfy-cart-goal-percenatge",`${e}%`),this.style.setProperty("--dbtfy-cart-goal-progresscolor",a),this.goalMessage.innerHTML=t,this.removeAttribute("hidden")}displayGoalMessage(t){const e=this.goals.sort(((t,e)=>t.goal_amount-e.goal_amount));for(let a=0;a<e.length;a++)if(t>=e[a].goal_amount){if(a===e.length-1)return this.current_goal=e[a],this.current_goal.cart_goal_success_text;const o=e[a+1];if(this.current_goal=o,t>o.goal_amount)return this.all_goals_reached=!0,o.cart_goal_success_text;const s=o.goal_amount-t;return o.cart_goal_text.replace("{amount}",`${Debutify.currency.symbol}${s.toFixed(2)}`)}this.current_goal=e[0];const a=e[0].goal_amount-t;return e[0].cart_goal_text.replace("{amount}",`${Debutify.currency.symbol}${a.toFixed(2)}`)}});