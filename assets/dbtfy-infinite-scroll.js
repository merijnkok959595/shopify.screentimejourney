customElements.get("dbtfy-infinite-scroll")||customElements.define("dbtfy-infinite-scroll",class extends HTMLElement{constructor(){super(),({banner_button_style:this.button_style,button_size:this.button_size,infinite_scroll_button:this.button_label,infinite_scroll_type:this.scroll_type,infinite_scroll_loading_image:this.loading_image_url}=Debutify.widgets["infinite-scroll"]),this.button=this.querySelector("#dbtfy-auto-scrollbar"),this.loadingImage=this.querySelector("img"),this.containerClass="#ProductGridContainer .product-grid",this.container=document.querySelector(this.containerClass),this.container||(this.containerClass=".main-blog .blog-articles"),this.container=document.querySelector(this.containerClass)}connectedCallback(){this.init()}init(){this.button&&this.container&&(this.setButtonClass(),"click"!=this.scroll_type&&this.loading_image_url?""!=this.loading_image_url&&(this.loadingImage.src=this.loading_image_url,this.loadingImage.classList.remove("hidden"),this.button.querySelector(".loading__spinner").remove(),this.button.style.border="0"):(this.button.classList.add(...this.buttonClass.split(" ")),this.button.appendChild(document.createTextNode(this.button_label)),this.loadingImage.remove()),"click"==this.scroll_type?this.button.addEventListener("click",(t=>{t.preventDefault(),this.button.querySelector(".loading__spinner").classList.remove("hidden"),this.loadMoreProducts()})):window.addEventListener("scroll",(()=>this.handleScroll())),this.classList.remove("hidden"))}setButtonClass(){switch(this.button_style){case"link":this.buttonClass="link underlined-link button--link";break;case"solid":this.buttonClass="button button-primary";break;case"outline":this.buttonClass="button button--secondary";break;default:this.buttonClass="button button--tertiary"}this.buttonClass+=` ${this.button_size}`}isInViewport(t){const i=t.getBoundingClientRect();return i.bottom>0&&i.top<window.innerHeight}async loadMoreProducts(){const t=this.button.dataset.url;this.button.classList.add("loading"),this.button.querySelector(".loading__spinner")?.classList.remove("hidden");try{const i=await fetch(t),s=await i.text(),e=(new DOMParser).parseFromString(s,"text/html"),n=e.querySelector(this.containerClass).innerHTML,o=e.querySelector("#dbtfy-auto-scrollbar");this.container.insertAdjacentHTML("beforeend",n),""!==o.dataset.url?this.button.dataset.url=o.dataset.url:this.button.remove()}catch(t){console.error("Error loading more products:",t)}finally{this.button.classList.remove("loading"),this.button.querySelector(".loading__spinner").classList.add("hidden")}}handleScroll(){this.button&&this.isInViewport(this.button)&&!this.button.classList.contains("loading")&&this.loadMoreProducts()}});