customElements.get("dbtfy-compare-badge")||customElements.define("dbtfy-compare-badge",class extends HTMLElement{constructor(){super(),this.url=Debutify.removeLocalFromUrl(this.dataset.productUrl).split("?")[0],this.icon=this.querySelector("i"),this.checked=!1}connectedCallback(){subscribe(PUB_SUB_EVENTS.compareUpdate,(({url:e,checked:t})=>{e===this.url&&(t?this.active():this.inactive())})),Debutify.compare.includes(this.url)&&(this.active(),this.checked=!0),this.addEventListener("click",this.toggle)}toggle(){this.checked?(this.inactive(),Debutify.compare=Debutify.compare.filter((e=>e!==this.url))):(this.active(),Debutify.compare.push(this.url)),localStorage.setItem("dbtfy-compare",JSON.stringify(Debutify.compare)),publish(PUB_SUB_EVENTS.compareUpdate,{url:this.url,checked:this.checked})}active(){this.classList.add("active"),this.checked=!0}inactive(){this.classList.remove("active"),this.checked=!1}}),customElements.get("dbtfy-compare-drawer")||customElements.define("dbtfy-compare-drawer",class extends HTMLElement{constructor(){super(),this.items=[],this.compareItems=this.dataset.compareItems.split(",")||[],this.titleSelector=this.querySelector('.dbtfy-compare-table__row[data-type="title"]'),this.priceSelector=this.querySelector('.dbtfy-compare-table__row[data-type="price"]'),this.imageSelector=this.querySelector('.dbtfy-compare-table__row[data-type="image"]'),this.typeSelector=this.querySelector('.dbtfy-compare-table__row[data-type="type"]'),this.vendorSelector=this.querySelector('.dbtfy-compare-table__row[data-type="vendor"]'),this.collectionsSelector=this.querySelector('.dbtfy-compare-table__row[data-type="collections"]'),this.tagsSelector=this.querySelector('.dbtfy-compare-table__row[data-type="tags"]'),this.shortDescriptionSelector=this.querySelector('.dbtfy-compare-table__row[data-type="short-description"]'),this.testMode=Shopify.designMode,this.heading=this.querySelector(".dbtfy-drawer__heading")}disconnectedCallback(){this.testMode&&(this.deselectEvent(),this.selectEvent())}connectedCallback(){this.testMode&&(this.deselectEvent=subscribe(PUB_SUB_EVENTS.shopifyEventSectionSelect,(e=>{"dbtfy-compare-drawer"===e.detail.sectionId&&this.parentElement.open()})),this.selectEvent=subscribe(PUB_SUB_EVENTS.shopifyEventSectionDeselect,(e=>{"dbtfy-compare-drawer"===e.detail.sectionId&&this.parentElement.close()}))),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".header__icon--compare").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.parentElement.open()}))}))})),this.init(),subscribe(PUB_SUB_EVENTS.compareUpdate,(async({url:e,checked:t})=>{t?await this.addItem(e):this.removeItem(e)}))}init(){const e=Debutify.compare.map((async e=>{await this.fetchItem(e)}));Promise.all(e).then((()=>{this.updateDrawer()}))}updateDrawer(){this.drawer_title=this.heading?.attributes["data-heading"].value,0==this.items.length?this.classList.add("dbtfy-compare-drawer--empty"):this.items.length>0&&this.classList.remove("dbtfy-compare-drawer--empty"),this.draweCount();const e={title:{selector:this.titleSelector,label:"Title",content:e=>{const t=document.createElement("a");return t.href="/products/"+e.product.handle,t.innerHTML=e.product.title,t}},price:{selector:this.priceSelector,label:"Price",content:e=>e.product.price},image:{selector:this.imageSelector,label:"Image",content:e=>{const t=document.createElement("div");t.classList.add("dbtfy-compare-table__image");const c=document.createElement("a");c.href="/products/"+e.product.handle;const r=document.createElement("img");return r.src=e.product.featured_image,r.alt=e.product.title,c.appendChild(r),t.appendChild(c),t.innerHTML+=e.remove_compare_html,t}},type:{selector:this.typeSelector,label:"Type",content:e=>e.product.type||"N/A"},vendor:{selector:this.vendorSelector,label:"Vendor",content:e=>e.product.vendor||"N/A"},collections:{selector:this.collectionsSelector,label:"Collections",content:e=>e.collections.map((e=>{const t=document.createElement("a");return t.href="/collections/"+e.handle,t.textContent=e.title,t.outerHTML})).join(", ")},tags:{selector:this.tagsSelector,label:"Tags",content:e=>e.product.tags||"N/A"},"short-description":{selector:this.shortDescriptionSelector,label:"Short Description",content:e=>e.product.description}};Object.values(e).forEach((e=>e.selector.innerHTML="")),this.compareItems.forEach((t=>{const c=e[t];if(!c)return;const r=document.createElement("th");r.classList.add("dbtfy-compare-table__sticky-col","dbtfy-compare-table__th"),r.innerHTML=c.label,c.selector.appendChild(r),this.items.forEach((({json:e})=>{const t=document.createElement("td");t.classList.add("dbtfy-compare-table__td");const r=c.content(e);r instanceof Node?t.appendChild(r):t.innerHTML=r,c.selector.appendChild(t)}))}))}draweCount(){this.drawer_title&&this.drawer_title.includes("count")&&(this.heading.innerHTML=this.drawer_title.replaceAll("{count}",this.items.length))}removeItem(e){this.items=this.items.filter((t=>t.url!==e)),Debutify.compare=Debutify.compare.filter((e=>e!==this.url)),this.updateDrawer()}async addItem(e){await this.fetchItem(e),this.updateDrawer()}async fetchItem(e){try{let t=await Debutify.fetchProductMarkup(`${e}?view=internal-compare`);if(!t)return this.removeItem(e),null;this.items.push({url:e,json:JSON.parse(t)})}catch(e){return console.error("Error: "+e),null}}}),customElements.get("dbtfy-quick-compare-count")||customElements.define("dbtfy-quick-compare-count",class extends HTMLElement{constructor(){super()}connectedCallback(){this.quickCompareBubblecount(),subscribe(PUB_SUB_EVENTS.compareUpdate,(()=>{this.quickCompareBubblecount()}))}quickCompareBubblecount(){this.querySelector("span")&&(this.querySelector("span").innerHTML=Debutify.compare.length)}}),customElements.get("dbtfy-quick-compare")||customElements.define("dbtfy-quick-compare",class extends HTMLElement{constructor(){super(),this.items=[],this.compareItems=this.dataset.compareItems.split(",")||[],this.titleSelector=this.querySelector('.dbtfy-compare-table__row[data-type="title"]'),this.priceSelector=this.querySelector('.dbtfy-compare-table__row[data-type="price"]'),this.imageSelector=this.querySelector('.dbtfy-compare-table__row[data-type="image"]'),this.typeSelector=this.querySelector('.dbtfy-compare-table__row[data-type="type"]'),this.vendorSelector=this.querySelector('.dbtfy-compare-table__row[data-type="vendor"]'),this.collectionsSelector=this.querySelector('.dbtfy-compare-table__row[data-type="collections"]'),this.tagsSelector=this.querySelector('.dbtfy-compare-table__row[data-type="tags"]'),this.shortDescriptionSelector=this.querySelector('.dbtfy-compare-table__row[data-type="short-description"]')}connectedCallback(){this.init(),subscribe(PUB_SUB_EVENTS.compareUpdate,(async({url:e,checked:t})=>{this.updateComaprelistCount(),t?await this.addItem(e):this.removeItem(e)}))}init(){this.updateComaprelistCount();const e=Debutify.compare.map((async e=>{await this.fetchItem(e)}));Promise.all(e).then((()=>{this.updateCompareSection()}))}updateComaprelistCount(){Debutify.compare.length>0?this.classList.contains("dbtfy-compare--has-items-empty")&&this.classList.remove("dbtfy-compare--has-items-empty"):this.classList.add("dbtfy-compare--has-items-empty")}updateCompareSection(){const e={title:{selector:this.titleSelector,label:"Title",content:e=>{const t=document.createElement("a");return t.href="/products/"+e.product.handle,t.innerHTML=e.product.title,t}},price:{selector:this.priceSelector,label:"Price",content:e=>e.product.price},image:{selector:this.imageSelector,label:"Image",content:e=>{const t=document.createElement("a");t.href="/products/"+e.product.handle;const c=document.createElement("img");return c.src=e.product.featured_image,c.alt=e.product.title,t.appendChild(c),t}},type:{selector:this.typeSelector,label:"Type",content:e=>e.product.type},vendor:{selector:this.vendorSelector,label:"Vendor",content:e=>e.product.vendor},collections:{selector:this.collectionsSelector,label:"Collections",content:e=>e.collections.map((e=>{const t=document.createElement("a");return t.href="/collections/"+e.handle,t.textContent=e.title,t.outerHTML})).join(", ")},tags:{selector:this.tagsSelector,label:"Tags",content:e=>e.product.tags},"short-description":{selector:this.shortDescriptionSelector,label:"Short Description",content:e=>e.product.description}};Object.values(e).forEach((e=>e.selector.innerHTML="")),this.compareItems.forEach((t=>{const c=e[t];if(!c)return;const r=document.createElement("th");r.classList.add("dbtfy-compare-table__sticky-col","dbtfy-compare-table__th"),r.innerHTML=c.label,c.selector.appendChild(r),this.items.forEach((({json:e})=>{const t=document.createElement("td");t.classList.add("dbtfy-compare-table__td");const r=c.content(e);r instanceof Node?t.appendChild(r):t.innerHTML=r,c.selector.appendChild(t)}))}))}removeItem(e){this.items=this.items.filter((t=>t.url!==e)),this.updateCompareSection()}async addItem(e){await this.fetchItem(e),this.updateCompareSection()}async fetchItem(e){try{let t=await Debutify.fetchProductMarkup(`${e}?view=internal-compare`);if(!t)return null;this.items.push({url:e,json:JSON.parse(t)})}catch(e){return console.error("Error: "+e),null}}});