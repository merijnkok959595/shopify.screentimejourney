customElements.get("dbtfy-cart-countdown-timer")||customElements.define("dbtfy-cart-countdown-timer",class extends HTMLElement{constructor(){super(),this.timerSetting=Debutify.widgets.cart_countdown_timer.length>0?Debutify.widgets.cart_countdown_timer[0]:null,this.timerSetting&&(this.duration=this.timeToSeconds(this.timerSetting.hours,this.timerSetting.minutes,this.timerSetting.seconds),this.storageKey="dbtfy_cart_countdown",this.timeRemaining=this.getStoredTime()||this.duration)}timeToSeconds(t,e,i){return 3600*parseInt(t)+60*parseInt(e)+parseInt(i)}getStoredTime(){const t=localStorage.getItem(this.storageKey);if(!t)return null;const{expiry:e}=JSON.parse(t),i=(new Date).getTime();return i>=e?(localStorage.removeItem(this.storageKey),null):Math.floor((e-i)/1e3)}setStoredTime(){const t=(new Date).getTime()+1e3*this.timeRemaining;localStorage.setItem(this.storageKey,JSON.stringify({timeRemaining:this.timeRemaining,expiry:t}))}connectedCallback(){this.timerSetting?(this.timerSetting.text=Debutify.replaceVariables(this.timerSetting.text,{hours:'<span class="dbtfy-cart-countdown__hours">'+this.timerSetting.hours+"</span>",minutes:'<span class="dbtfy-cart-countdown__minutes">'+this.timerSetting.minutes+"</span>",seconds:'<span class="dbtfy-cart-countdown__seconds">'+this.timerSetting.seconds+"</span>"}),""!=this.timerSetting?.custom_icon?this.querySelector(".material_icon").remove():this.querySelector(".custom_icon").remove(),this.innerHTML=Debutify.replaceVariables(this.innerHTML,{message:this.timerSetting.text,icon:this.timerSetting.icon,custom_icon:this.timerSetting?.custom_icon_tag,alignment:this.timerSetting.alignment}),this.hoursElement=this.querySelector(".dbtfy-cart-countdown__hours"),this.minutesElement=this.querySelector(".dbtfy-cart-countdown__minutes"),this.secondsElement=this.querySelector(".dbtfy-cart-countdown__seconds"),this.timeRemaining=this.getStoredTime()||this.duration,this.startTimer(),this.classList.remove("hidden")):this.remove()}disconnectedCallback(){this.interval&&clearInterval(this.interval)}startTimer(){this.updateDisplay(),this.setStoredTime(),this.interval=setInterval((()=>{if(this.timeRemaining--,this.setStoredTime(),this.timeRemaining<=0)return clearInterval(this.interval),localStorage.removeItem(this.storageKey),void this.remove();this.updateDisplay()}),1e3)}updateDisplay(){const t=Math.floor(this.timeRemaining/3600),e=Math.floor(this.timeRemaining%3600/60),i=this.timeRemaining%60;this.hoursElement.textContent=`${t}`,this.minutesElement.textContent=`${e}`,this.secondsElement.textContent=`${i}`}});