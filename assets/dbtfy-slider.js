class DbtfySliderComponent extends HTMLElement{constructor(){if(super(),this.slider=this.querySelector('[id^="Slider-"]'),!this.slider)return;this.debug="true"===this.dataset.debug,this.currentPage=1,this.sliderItems=this.querySelectorAll('[id^="Slide-"]'),this.totalPages=0,this.currentPageElement=this.querySelector(".slider-counter--current"),this.pageTotalElement=this.querySelector(".slider-counter--total"),this.initPages();new ResizeObserver((()=>{this.initPages(),this.connectedCallback()})).observe(this.slider),this.slider.addEventListener("scroll",this.update.bind(this)),this.autoPlay="true"===this.dataset.autoplay,this.autoplaySpeed=1e3*this.dataset.speed||5e3,this.loop="true"===this.dataset.loop,this.arrows="true"===this.dataset.arrows,this.dots="true"===this.dataset.dots,this.controlsPosition=this.dataset.controlsPosition||"bottom",this.controlsClass=this.dataset.controlsClass||"slider-buttons"}connectedCallback(){if("inside"===this.controlsPosition){const t=this.querySelector(`.${this.controlsClass}`);if(t){t.classList.contains("slideshow__controls--top")||(t.style.position="relative");const e=this.querySelector(".slider-buttons").offsetHeight;let s=this.querySelector(".slider"),i="0px";s&&(i=window.getComputedStyle(s).getPropertyValue("margin-bottom"));let o=this.querySelector(".grid__item"),r="0px";o&&(r=window.getComputedStyle(o).getPropertyValue("padding-bottom")),t.style.marginTop="calc(0px - ("+e+"px + "+i+" + "+r+"))"}}this.autoPlay&&this.totalPages>1&&this.play(),this.arrows&&this.totalPages>1&&this.initializeArrows(),this.dots&&this.totalPages>1&&this.initializeDots()}update(){this.slider&&(this.currentPage=Math.round(this.slider.scrollLeft/this.sliderItemOffset)+1,this.dots&&this.handleDotState(),this.arrows&&!this.loop&&this.prevButton&&this.nextButton&&(1===this.currentPage?this.prevButton.setAttribute("disabled","true"):this.prevButton.removeAttribute("disabled"),this.currentPage===this.totalPages?this.nextButton.setAttribute("disabled","true"):this.nextButton.removeAttribute("disabled")))}handleDotState(){if(!this.dotsWrapper)return;this.dotsWrapper.querySelectorAll(".slider-counter__link--dots").forEach((t=>{t.classList.remove("slider-counter__link--active"),t.getAttribute("data-slide")==this.currentPage&&t.classList.add("slider-counter__link--active")}))}initializeDots(){if(this.dotsWrapper=this.querySelector(".slideshow__control-wrapper"),this.dotsWrapper){this.dotsWrapper.innerHTML="";for(let t=1;t<=this.totalPages;t++){const e=document.createElement("button");e.classList.add("slider-counter__link","slider-counter__link--dots","link"),e.setAttribute("data-slide",t),e.setAttribute("aria-label","Slide "+t);const s=document.createElement("span");s.classList.add("dot"),e.appendChild(s),e.addEventListener("click",(e=>{this.goToSlide(t)})),this.dotsWrapper.appendChild(e)}this.dotsWrapper.parentElement.classList.remove("hidden"),this.handleDotState()}}initializeArrows(){this.arrowsSelector="common"|this.dataset.arrowsSelector,this.nextSelector=this.dataset.nextSelector,this.prevSelector=this.dataset.prevSelector,this.nextSelector&&this.prevSelector&&"custom"===this.arrowsSelector?(this.prevButton=document.querySelector(this.prevSelector),this.nextButton=document.querySelector(this.nextSelector)):(this.prevButton=this.querySelector('button[name="previous"]'),this.nextButton=this.querySelector('button[name="next"]')),this.prevButton&&this.nextButton&&(this.prevButton.classList.remove("hidden"),this.nextButton.classList.remove("hidden"),this.prevButton&&this.prevButton.addEventListener("click",this.goToPreviousSlide.bind(this)),this.nextButton&&this.nextButton.addEventListener("click",this.goToNextSlide.bind(this)))}initPages(){this.sliderItemsToShow=Array.from(this.sliderItems).filter((t=>t.clientWidth>0)),this.sliderItemsToShow.length<2||(this.sliderItemOffset=this.sliderItemsToShow[1].offsetLeft-this.sliderItemsToShow[0].offsetLeft,this.slidesPerPage=Math.floor((this.slider.clientWidth-this.sliderItemsToShow[0].offsetLeft)/this.sliderItemOffset),this.sliderItemsToShow[0].offsetLeft>0?this.totalPages=this.sliderItemsToShow.length-this.slidesPerPage+1:this.totalPages=this.sliderItemsToShow.length-this.slidesPerPage,this.update())}resetPages(){this.sliderItems=this.querySelectorAll('[id^="Slide-"]'),this.initPages()}setSlidePosition(t){this.slider.scrollTo({left:t})}play(){clearInterval(this.autoplay),this.autoplay=setInterval(this.goToNextSlide.bind(this),this.autoplaySpeed)}goToNextSlide(){this.currentPage===this.totalPages&&this.loop?this.goToSlide(1):this.goToSlide(this.currentPage+1)}goToPreviousSlide(){1===this.currentPage&&this.loop?this.goToSlide(this.totalPages):this.goToSlide(this.currentPage-1)}goToSlide(t){this.slideScrollPosition=(t-1)*this.sliderItemOffset,this.setSlidePosition(this.slideScrollPosition)}}customElements.define("dbtfy-slider-component",DbtfySliderComponent);