customElements.get("custom-variant-option")||customElements.define("custom-variant-option",class extends HTMLElement{constructor(){super(),this.init()}init(){this.querySelectorAll(".custom_variant_option select").forEach((t=>{t.addEventListener("change",(t=>{const e=Array.from(this.querySelectorAll("select")).map((t=>t.value)).join(" / ");let a=this.dataset.oldVariantId;const n=this.querySelector(`.custom_variant_option__select div[data-option-name="${e}"]`)?.getAttribute("value");this.dataset.oldVariantId=n;let o=this.closest(".custom_varaint_box").querySelector(".custom_quantity__input").value;fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,quantity:0})}).then((()=>fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n,quantity:o,sections:"cart-drawer,cart-icon-bubble"})}))).then((t=>t.json())).then((t=>{this.cart=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),this.cart?this.cart.renderContents(t,Debutify.settings.cart_type_action):publish(PUB_SUB_EVENTS.cartUpdate,{source:"product-form",productVariantId:n,cartData:t})}))}))}))}});