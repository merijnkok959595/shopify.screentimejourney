customElements.get("dbtfy-age-check")||customElements.define("dbtfy-age-check",class extends HTMLElement{constructor(){super(),this.validAge=this.dataset.validAge,this.verificationType=this.dataset.verificationType,this.designMode=Shopify.designMode}modalSelector(){"yes-no"==this.verificationType?this.ageCheckValue=this.modal.modalBox.querySelectorAll("button"):(this.monthGet=this.modal.modalBox.querySelector(".dbtfy-age-check-birthdate .dbtfy-age-check__month-picker").value-1,this.dayGet=this.modal.modalBox.querySelector(".dbtfy-age-check-birthdate .dbtfy-age-check__day-picker").value,this.yearGet=this.modal.modalBox.querySelector(".dbtfy-age-check-birthdate .dbtfy-age-check__year-picker").value,this.closeButton=this.modal.modalBox.querySelector(".dbtfy-age-check-birthdate button")),this.verifyText=this.modal.modalBox.querySelector(".dbtfy-age-check__verify--text"),this.verifyErrorText=this.modal.modalBox.querySelector(".dbtfy-age-check__verify--error"),this.verifyBirthErrorText=this.modal.modalBox.querySelector(".dbtfy-age-check__verify-birth--error")}connectedCallback(){this.designMode=Shopify.designMode,document.addEventListener("DOMContentLoaded",(()=>{this.modal=new Debutify.modal({closeMethods:[],size:"medium",closeIcon:"",selector:"dbtfy-age-check",boxClass:[],overlayClass:["dbtfy-age-check-overlay"],onOpen:function(){},onClose:function(){}})})),this.designMode||this.storageValue()}storageValue(){localStorage.getItem("DebutifyAgeChecker")||setTimeout((()=>{this.ageModalShow(),this.agecheckModal()}),500)}ageModalShow(){this.modal.open()}agecheckModal(){this.modalSelector(),"yes-no"==this.verificationType?this.yesNoAgeCheck():"birth-date"==this.verificationType&&this.birthDateAgeCheck()}yesNoAgeCheck(){this.ageCheckValue.forEach((e=>{e.onclick=()=>{"yes"==e.value?this.localStorage():this.verifyTextError()}}))}birthDateAgeCheck(){this.closeButton.onclick=()=>{if(this.modalSelector(),this.monthGet>=0&&this.dayGet>0&&this.yearGet>0){const e=new Date(this.yearGet,this.monthGet,this.dayGet);this.calculateAge(e)>=this.validAge?this.localStorage():this.verifyTextError()}else 0==this.modal.modalBox.querySelector(".dbtfy-age-check__month-picker").value&&0==this.modal.modalBox.querySelector(".dbtfy-age-check__day-picker").value&&0==this.modal.modalBox.querySelector(".dbtfy-age-check__year-picker").value&&this.verifyTextError("birthday")}}calculateAge(e){const t=Date.now()-e.getTime();let o=new Date(t).getUTCFullYear()-1970;const i=new Date,r=new Date(i.getFullYear(),e.getMonth(),e.getDate());return i<r&&o--,o}localStorage(){localStorage.setItem("DebutifyAgeChecker","true"),this.modal.close()}verifyTextError(e){this.verifyText&&(this.verifyText.style.display="none"),e?this.verifyBirthErrorText&&(this.verifyBirthErrorText.style.display="block"):(this.verifyErrorText&&(this.verifyErrorText.style.display="block"),this.verifyBirthErrorText&&(this.verifyBirthErrorText.style.display="none"))}});