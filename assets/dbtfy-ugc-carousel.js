customElements.get("dbtfy-ugc-carousel")||customElements.define("dbtfy-ugc-carousel",class extends HTMLElement{constructor(){super(),this.init(),this.sliderEnabled=this.dataset.sliderEnabled}init(){if("undefined"!=typeof Splide)this.setupSlider();else{let e=this;document.addEventListener("DOMContentLoaded",(function(){e.setupSlider()}))}}sliderConfig(){let e;return this.desktopGap=this.dataset.desktopGap||Debutify.settings.spacing_grid_horizontal||"1.2em",this.mobileGap=this.dataset.mobileGap||Debutify.settings.spacing_grid_horizontal/2||".6em",this.autoplay=this.dataset.autoplay||"false",this.autoplaySpeed=1e3*this.dataset.autoplaySpeed,this.loop=this.dataset.loop||"false","true"==this.loop?this.loop="loop":this.loop="false",this.desktopCol=this.dataset.sliderDesktopCol||6,this.mobileCol=this.dataset.sliderMobileCol||1,"none"===this.sliderEnabled?this.querySelector(".dbtfy_ugc_slider").classList.remove("splide"):e="desktop"===this.sliderEnabled?{perPage:this.desktopCol,perMove:1,gap:this.desktopGap,pagination:this.dataset.dots,drag:!1,autoplay:"true"===this.autoplay,interval:this.autoplaySpeed,type:this.loop,height:"auto",focus:"center",breakpoints:{749:{destroy:!0}},classes:{arrow:"slider-button splide__arrow"}}:"mobile"===this.sliderEnabled?{perPage:this.mobileCol,perMove:1,type:this.loop,height:"auto",focus:"center",mediaQuery:"min",pagination:this.dataset.dots,drag:!1,autoplay:this.autoplay,interval:this.autoplaySpeed,breakpoints:{750:{perPage:this.mobileCol,perMove:1,destroy:!0,drag:!1}},classes:{arrow:"slider-button splide__arrow"}}:{perPage:this.desktopCol,perMove:1,drag:!1,autoplay:this.autoplay,interval:this.autoplaySpeed,gap:this.desktopGap,type:this.loop,height:"auto",focus:"center",pagination:this.dataset.dots,breakpoints:{749:{perPage:this.mobileCol,perMove:1,drag:!1,gap:this.mobileGap,focus:"start"}},classes:{arrow:"slider-button splide__arrow"}},e}setupSlider(){let e=this;var t=new Splide(".dbtfy_ugc_slider",this.sliderConfig());t.mount(),this.loop=this.dataset.loop||"false","false"==this.loop&&this.controlSetup(),this.playSetup(),window.addEventListener("load",(function(){setTimeout((()=>{e.querySelector(".splide__slide.is-active.is-visible .dbtfy-ugc-carousel-block:not(.dbtfy-ugc-carousel-block__youtube)")&&(e.querySelector(".splide__slide.is-active.is-visible .dbtfy-ugc-carousel-block__play-button").click(),e.querySelector(".splide__slide.is-active.is-visible .dbtfy-ugc-carousel-volume__controls").classList.remove("hidden"))}),100)})),t.on("move",(function(t){window.pauseAllMedia(),e.playbutton=e.querySelector(`#splide01-slide0${t+1} .dbtfy-ugc-carousel-block__play-button`),e.volumeControls=e.querySelector(`#splide01-slide0${t+1} .dbtfy-ugc-carousel-volume__controls`),e.playbutton&&e.playbutton.click(),e.volumeControls?e.volumeControls.classList.remove("hidden"):e.controllHide()}))}controlSetup(){this.querySelectorAll("video").forEach((e=>{e.addEventListener("ended",(()=>{e.closest(".splide__slide").querySelector(".dbtfy-ugc-carousel-block__play-button").style.display="flex",e.closest(".splide__slide").querySelector(".dbtfy-ugc-carousel-volume__controls").classList.add("hidden")})),e.addEventListener("click",(function(t){e.pause(),e.closest(".splide__slide").querySelector(".dbtfy-ugc-carousel-block__play-button").style.display="flex",e.closest(".splide__slide").querySelector(".dbtfy-ugc-carousel-volume__controls").classList.add("hidden")}))})),this.querySelectorAll(".dbtfy-ugc-carousel-volume__controls").forEach((e=>{e.addEventListener("click",(function(t){var s=e.closest(".splide__slide").querySelector("video");s.muted=!s.muted,e.querySelectorAll("i").forEach((e=>{e.classList.toggle("hidden")}))}))}))}playSetup(){this.querySelectorAll(".dbtfy-ugc-carousel-block__play-button").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();Array.from(this.closest(".splide__slide").parentElement.children).forEach((e=>{e.querySelector(".dbtfy-ugc-carousel-block__youtube")||(e.querySelector(".dbtfy-ugc-carousel-volume__controls").classList.add("hidden"),e.querySelector("video").pause(),e.querySelector(".dbtfy-ugc-carousel-block__play-button").style.display="flex")}));const t=this.closest(".splide__slide").querySelector("video");t&&(t.play(),this.style.display="none",this.closest(".splide__slide").querySelector(".dbtfy-ugc-carousel-volume__controls").classList.remove("hidden"))}))}))}controllHide(){this.videoSiblings=this.querySelectorAll(".splide__slide"),this.videoSiblings&&this.videoSiblings.forEach((e=>{e.querySelector(".dbtfy-ugc-carousel-block__youtube")||(e.querySelector(".dbtfy-ugc-carousel-block__play-button").style.display="flex")}))}});