customElements.get("dbtfy-form-validator")||customElements.define("dbtfy-form-validator",class extends HTMLElement{constructor(){super(),this.formValidated=!0,this.form=this.querySelector("form"),this.form.setAttribute("novalidate",""),this.form.addEventListener("submit",this.validateForm.bind(this)),this.form.querySelector("button[type='submit']").addEventListener("click",this.validateForm.bind(this)),this.requiredFields=this.form.querySelectorAll(".field__input:required"),this.emailField=this.form.querySelectorAll('input[type="email"]'),this.errorMessageBox=this.form.querySelector(".form__error-message"),this.designMode=Shopify.designMode,this.init()}init(){if(this.designMode){if(0==this.emailField.length)return this.errorMessageBox.classList.remove("hidden"),void(this.errorMessageBox.querySelector(".error").textContent=this.dataset.oneEmailError);if(this.emailField.length>1)return this.errorMessageBox.classList.remove("hidden"),void(this.errorMessageBox.querySelector(".error").textContent=this.dataset.emailError)}}validateForm(e){e.preventDefault(),e.stopPropagation(),this.formValidated=!0,this.checkRequiredFields(),this.checkEmailField(),this.formValidated&&(this.form.removeEventListener("submit",this.validateForm),this.form.submit(),this.form.addEventListener("submit",this.validateForm.bind(this)))}checkRequiredFields(){this.requiredFields.forEach((e=>{e.value?e.closest(".field").classList.remove("is-invalid"):(e.closest(".field").classList.add("is-invalid"),this.formValidated=!1)}))}checkEmailField(){this.emailField[0]&&(this.emailField[0].validity.typeMismatch||this.emailField[0].validity.valueMissing)?(this.emailField[0].closest(".field").classList.add("is-invalid"),this.formValidated=!1):this.emailField[0].closest(".field").classList.remove("is-invalid")}});