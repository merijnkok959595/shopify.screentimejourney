customElements.get("main-product-gallery")||customElements.define("main-product-gallery",class extends HTMLElement{constructor(){super(),this.mainCarouselSelector="#main-carousel",this.thumbnailCarouselSelector="#thumbnail-carousel",this.init(),this.syncedVariantImage=this.dataset.syncedVariantImage}connectedCallback(){subscribe(PUB_SUB_EVENTS.variantChange,this.handleVariantChange.bind(this))}init(){this.mainSlider=new Splide(this.querySelector(this.mainCarouselSelector),{type:"loop",rewind:!0,pagination:!1,arrows:!1,autoHeight:!0,perPage:1,heightRatio:1}),window.matchMedia("(max-width: 600px)").matches&&"hide"===this.querySelector(this.thumbnailCarouselSelector).dataset.showArrowsMobile?this.querySelector(this.thumbnailCarouselSelector).classList.add("hidden"):this.querySelector(this.thumbnailCarouselSelector).classList.remove("hidden"),this.thumbnailSlider=new Splide(this.querySelector(this.thumbnailCarouselSelector),{perPage:5,gap:10,pagination:!1,dragMinThreshold:10,isNavigation:!0,arrows:"true"===this.querySelector(this.thumbnailCarouselSelector).dataset.showArrows,breakpoints:{600:{destroy:"hide"===this.querySelector(this.thumbnailCarouselSelector).dataset.showArrowsMobile}},classes:{arrow:"slider-button splide__arrow"}}),this.mainSlider.sync(this.thumbnailSlider),this.mainSlider.mount(),this.thumbnailSlider.mount()}handleVariantChange({data:{variant:e}}){if(!e.featured_media||"true"!==this.syncedVariantImage)return;const t=e.featured_media.id;let i=this.querySelector(this.thumbnailCarouselSelector)?.querySelector(`[data-media-id='${t}']`)?.dataset.position;i&&(i=parseInt(i)-1,this.thumbnailSlider?.go(i))}});