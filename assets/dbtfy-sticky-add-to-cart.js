customElements.get("dbtfy-addtocart-sticky")||customElements.define("dbtfy-addtocart-sticky",class extends HTMLElement{constructor(){super(),this.testMode=Shopify.designMode,this.selectEvent=null,this.deselectEvent=null,this.toast=null,this.variantSelector=this.querySelector('select[name="id"]'),this.mainVariantInput=document.querySelector('.product .product-form input[name="id"]'),this.triggerType=this.dataset.triggerType,this.scrollDepth=parseInt(this.dataset.scrollDepth),this.hasOnlyDefaultVariant="true"===this.dataset.hasOnlyDefaultVariant,this.position=this.dataset.position,this.colorScheme=this.dataset.colorScheme,this.showon=this.dataset.showon,this.CustomColorScheme=this.dataset.customColorScheme,this.addtocartSimplified=this.dataset.addtocartSimplified,this.variantSelector?.addEventListener("change",(t=>{this.onVariantChange(t)})),this.mainVariantInput?.addEventListener("change",(t=>{this.onMainProductFormVariantChange(t)})),this.backToTop=document.querySelector("back-to-top"),this.whatsAppChat=document.querySelector("dbtfy-whatsapp-chat")}connectedCallback(){this.testMode?(this.selectEvent=subscribe(PUB_SUB_EVENTS.stickyAddToCartSelect,(t=>{this.show()})),this.deselectEvent=subscribe(PUB_SUB_EVENTS.stickyAddToCartDeselect,(t=>{this.toast?.hideToast()}))):this.init()}disconnectedCallback(){this.testMode&&(this.toast?.destroyToast(),this.selectEvent(),this.deselectEvent())}show(){let t=`dbtfy-addtocart-sticky show-on--${this.showon}`;"top"===this.position&&(t+=" dbtfy-addtocart-sticky-top"),window.innerWidth<750?"true"===this.addtocartSimplified?(t+=" dbtfy-addtocart-simplified",this.backToTop?(this.backToTop.style.setProperty("--dbtfy-btt-bottom-margin","10rem"),this.whatsAppChat&&this.whatsAppChat.style.setProperty("--scroll-whatsapp-height","16rem")):this.whatsAppChat&&this.whatsAppChat.style.setProperty("--scroll-whatsapp-height","10rem")):this.backToTop?(this.backToTop.style.setProperty("--dbtfy-btt-bottom-margin","15rem"),this.whatsAppChat&&this.whatsAppChat.style.setProperty("--scroll-whatsapp-height","21rem")):this.whatsAppChat&&this.whatsAppChat.style.setProperty("--scroll-whatsapp-height","15rem"):this.backToTop&&this.whatsAppChat&&this.whatsAppChat.style.setProperty("--scroll-whatsapp-height","8rem");const e={position:`${this.position}-center`,maxWidth:"100%",className:t,colorScheme:this.colorScheme,customColorScheme:this.CustomColorScheme};this.toast=new Debutify.toast(this.innerHTML,e)}init(){const t=document.body.scrollHeight-window.innerHeight,e=this.scrollDepth/100*t;window.addEventListener("scroll",(()=>{const t=document.querySelector(".product product-form").getBoundingClientRect().bottom,s=window.scrollY;"scroll"===this.triggerType&&0>t||"scroll_depth"===this.triggerType&&s>=e?this.toast||this.show():(this.toast?.destroyToast(),this.toast=null)}))}onVariantChange(t){t.preventDefault();const e=this.variantSelector.options[this.variantSelector.selectedIndex].dataset.variantImg;if(e){const t=this.querySelector(".dbtfy-addtocart-sticky-img");t&&(t.src=e)}}onMainProductFormVariantChange(){this.variantSelector.value=this.mainVariantInput.value,this.variantSelector.dispatchEvent(new Event("change"))}});